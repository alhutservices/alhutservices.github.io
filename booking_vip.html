<script>
    let map, marker;

    window.onload = function() {
        const params = new URLSearchParams(window.location.search);
        document.getElementById('vType').innerText = params.get('type') === 'wedding' ? 'ğŸ Ø³ÙŠØ§Ø±Ø§Øª Ø£Ø¹Ø±Ø§Ø³ Ù…Ø²ÙŠÙ†Ø©' : 'ğŸš— ØªØ£Ø¬ÙŠØ± Ø³ÙŠØ§Ø±Ø© Ø´Ø®ØµÙŠØ©';
        document.getElementById('vDate').innerText = params.get('date') || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¹Ù„Ù‰ ÙƒØ±ÙƒÙˆÙƒ
        const defaultPos = [35.4687, 44.3921];
        map = L.map('map').setView(defaultPos, 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        marker = L.marker(defaultPos, {draggable: true}).addTo(map);

        // ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù…Ø«Ù„ ÙƒÙˆØ±Ø³ Ø§Ù„ØªØ¹Ù„ÙŠÙ…)
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                const userPos = [lat, lon];
                
                map.setView(userPos, 16); // ØªÙ‚Ø±ÙŠØ¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø²Ø¨ÙˆÙ†
                marker.setLatLng(userPos); // Ù†Ù‚Ù„ Ø§Ù„Ø¯Ø¨ÙˆØ³ Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø²Ø¨ÙˆÙ†
                document.getElementById('vCoords').value = lat + "," + lon;
            }, function() {
                console.log("ØªÙ… Ø±ÙØ¶ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙƒØ±ÙƒÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©.");
            });
        }

        marker.on('dragend', function() {
            const pos = marker.getLatLng();
            document.getElementById('vCoords').value = pos.lat + "," + pos.lng;
        });
        document.getElementById('vCoords').value = defaultPos[0] + "," + defaultPos[1];
    };
    
    // ... Ø¨Ø§Ù‚ÙŠ Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙƒÙ…Ø§ Ù‡ÙŠ ...
</script>
