<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أسطول الحوت | اختيار السيارة الذكي</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { whale: '#002349', gold: '#D4AF37' }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f8fafc; }
        .car-card { transition: all 0.4s ease; }
        .animate-pop { animation: popIn 0.5s ease; }
        @keyframes popIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="text-whale">

    <nav class="bg-whale text-white py-4 px-6 sticky top-0 z-[100] shadow-xl border-b-2 border-gold">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-2xl font-black text-gold">الحـوت <i class="fas fa-fish"></i></a>
            <div class="bg-gold/20 border border-gold/30 px-4 py-1 rounded-full text-xs font-bold text-gold">
                أفضل خدمة تأجير في كركوك
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            
            <aside class="w-full lg:w-72 flex-shrink-0">
                <div class="bg-white rounded-3xl p-6 shadow-xl border border-gray-100 sticky top-24">
                    <h3 class="font-black text-lg mb-6 flex items-center gap-2">
                        <i class="fas fa-filter text-gold"></i> فلترة النتائج
                    </h3>

                    <div class="mb-6">
                        <label class="block text-xs font-black mb-3 text-gray-400 uppercase tracking-tighter">تصنيف السيارة</label>
                        <div class="space-y-2">
                            <label class="flex items-center gap-3 p-3 rounded-xl border border-gray-100 hover:bg-gray-50 cursor-pointer transition">
                                <input type="checkbox" value="luxury" class="type-filter w-4 h-4 accent-gold">
                                <span class="text-sm font-bold">سيارات فاخرة</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 rounded-xl border border-gray-100 hover:bg-gray-50 cursor-pointer transition">
                                <input type="checkbox" value="suv" class="type-filter w-4 h-4 accent-gold">
                                <span class="text-sm font-bold">عائلية / SUV</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 rounded-xl border border-gray-100 hover:bg-gray-50 cursor-pointer transition">
                                <input type="checkbox" value="economy" class="type-filter w-4 h-4 accent-gold">
                                <span class="text-sm font-bold">اقتصادية</span>
                            </label>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-xs font-black mb-3 text-gray-400 uppercase tracking-tighter">السعر الأقصى: <span id="priceVal" class="text-whale text-sm font-black">500</span>$</label>
                        <input type="range" id="priceRange" min="40" max="500" value="500" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-gold">
                    </div>

                    <button id="applyBtn" class="w-full bg-whale text-white py-4 rounded-2xl font-black shadow-lg hover:bg-gold hover:text-whale transition-all">
                        تطبيق الفلاتر الآن
                    </button>
                </div>
            </aside>

            <main class="flex-grow">
                <div id="carsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
            </main>
        </div>
    </div>

    <script>
        // 1. بيانات السيارات (قاعدة البيانات)
        const allCars = [
            { id: 1, name: "بورش 911 كاريرا", type: "luxury", price: 290, img: "https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=600", seats: 2 },
            { id: 2, name: "رينج روفر سبورت", type: "suv", price: 350, img: "https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?w=600", seats: 5 },
            { id: 3, name: "تويوتا كورولا", type: "economy", price: 45, img: "https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?w=600", seats: 5 },
            { id: 4, name: "مرسيدس G-Class", type: "luxury", price: 450, img: "https://images.unsplash.com/photo-1520031441872-265e4ff70366?w=600", seats: 5 },
            { id: 5, name: "هيونداي سانتا في", type: "suv", price: 80, img: "https://images.unsplash.com/photo-1569733593314-8d8294a46ca3?w=600", seats: 7 }
        ];

        // 2. العناصر من الصفحة
        const grid = document.getElementById('carsGrid');
        const priceRange = document.getElementById('priceRange');
        const priceVal = document.getElementById('priceVal');
        const applyBtn = document.getElementById('applyBtn');

        // تحديث الرقم المعروض عند تحريك السلايدر
        priceRange.addEventListener('input', () => {
            priceVal.innerText = priceRange.value;
        });

        // 3. وظيفة رسم السيارات في الشبكة
        function displayCars(carsArray) {
            grid.innerHTML = ''; // مسح القديم
            
            if (carsArray.length === 0) {
                grid.innerHTML = `<div class="col-span-full text-center py-20 bg-white rounded-3xl border-2 border-dashed">
                    <i class="fas fa-search-minus text-4xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500 font-bold">لا توجد سيارات مطابقة لهذه الفلاتر حالياً.</p>
                </div>`;
                return;
            }

            carsArray.forEach(car => {
                const card = `
                    <div class="car-card bg-white rounded-[2rem] p-4 shadow-sm border border-gray-100 animate-pop">
                        <img src="${car.img}" class="w-full h-48 object-cover rounded-[1.5rem] mb-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">${car.name}</h3>
                            <span class="text-gold font-black">$${car.price}</span>
                        </div>
                        <div class="flex gap-2">
                            <a href="car-details.html" class="flex-1 text-center py-3 bg-gray-100 rounded-xl font-bold text-sm">التفاصيل</a>
                            <a href="booking.html" class="flex-[2] text-center py-3 bg-whale text-white rounded-xl font-bold text-sm shadow-lg">احجز الآن</a>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        // 4. وظيفة تصفية البيانات عند الضغط على الزر
        applyBtn.addEventListener('click', () => {
            const maxPrice = parseInt(priceRange.value);
            // جلب الأنواع المختارة
            const selectedTypes = Array.from(document.querySelectorAll('.type-filter:checked')).map(el => el.value);

            const filtered = allCars.filter(car => {
                const priceMatch = car.price <= maxPrice;
                const typeMatch = selectedTypes.length === 0 || selectedTypes.includes(car.type);
                return priceMatch && typeMatch;
            });

            displayCars(filtered);
        });

        // تشغيل العرض الأولي عند فتح الصفحة
        displayCars(allCars);

    </script>
</body>
</html>
