<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ø­ÙˆØª Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ğŸ‹ - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <!-- Leaflet Library Ù„Ù„Ø®Ø±ÙŠØ·Ø© -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>

<section class="customer-page">
  <div class="customer-card">

    <h2>ğŸ‹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ†</h2>
    <p class="subtitle">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯Ù‚Ø© Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬Ø²</p>

    <form id="customerForm">

      <div class="form-group">
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
        <input type="text" id="name" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ" required>
      </div>

      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="tel" id="phone" placeholder="07xxxxxxxx" required>
      </div>

      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</label>
        <input type="text" id="idNumber" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©" required>
      </div>

      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø¥Ø¬Ø§Ø²Ø© Ø§Ù„Ø³ÙˆÙ‚</label>
        <input type="text" id="licenseNumber" placeholder="Ø±Ù‚Ù… Ø¥Ø¬Ø§Ø²Ø© Ø§Ù„Ø³ÙˆÙ‚" required>
      </div>

      <div class="alert-box">
        âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø­Ø¶Ø§Ø± <strong>Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© + Ø¥Ø¬Ø§Ø²Ø© Ø§Ù„Ø³ÙˆÙ‚</strong> Ø¹Ù†Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©
      </div>

      <div class="form-group">
        <label>Ù…ÙˆÙ‚Ø¹ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©</label>
        <div id="map"></div>
      </div>

      <button type="submit" class="submit-btn">
        Ù…ØªØ§Ø¨Ø¹Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² â†’
      </button>

    </form>
  </div>
</section>

<script>
  // 1ï¸âƒ£ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
  var map = L.map('map').setView([35.4681, 44.3922], 13); // Ù…Ø±ÙƒØ² ÙƒØ±ÙƒÙˆÙƒ
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  var marker;

  // 2ï¸âƒ£ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
  map.on('click', function(e) {
      var lat = e.latlng.lat;
      var lng = e.latlng.lng;

      if(marker) map.removeLayer(marker);
      marker = L.marker([lat, lng]).addTo(map)
        .bindPopup("Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…").openPopup();

      document.querySelector("#locationInput").value = lat + "," + lng;
  });

  // 3ï¸âƒ£ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨
  document.querySelector("#customerForm").addEventListener("submit", function(e){
      e.preventDefault();

      var name = document.querySelector("#name").value;
      var phone = document.querySelector("#phone").value;
      var idNumber = document.querySelector("#idNumber").value;
      var licenseNumber = document.querySelector("#licenseNumber").value;
      var location = document.querySelector("#locationInput").value;

      var message = `ğŸ‹ *Ø§Ù„Ø­ÙˆØª Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª*\n\n` +
                    `Ø§Ù„Ø§Ø³Ù…: ${name}\n` +
                    `Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phone}\n` +
                    `Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©: ${idNumber}\n` +
                    `Ø¥Ø¬Ø§Ø²Ø© Ø§Ù„Ø³ÙˆÙ‚: ${licenseNumber}\n` +
                    `Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: ${location}`;

      // Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø´Ø±ÙƒØ©
      var waNumber = "+9647713225471";

      // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨
      var waLink = `https://wa.me/${waNumber}?text=${encodeURIComponent(message)}`;
      window.open(waLink, "_blank");
  });
</script>

</body>
</html>
