<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© | Ø´Ø±ÙƒØ© Ø§Ù„Ø­ÙˆØª ğŸ‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f1f5f9; }
        .confirm-card { background: white; border-radius: 3.5rem; shadow: 0 30px 60px rgba(0,0,0,0.12); overflow: hidden; border-top: 12px solid #002349; }
        .data-row { display: flex; justify-content: space-between; padding: 14px 0; border-bottom: 1px solid #f1f5f9; align-items: center; }
        .data-label { color: #64748b; font-weight: bold; font-size: 0.85rem; }
        .data-value { color: #002349; font-weight: 900; text-align: left; }
        .status-badge { background: #ecfdf5; color: #059669; padding: 4px 12px; rounded: 10px; font-size: 0.7rem; font-weight: 800; }
    </style>
</head>
<body class="p-4 md:p-12">

    <div class="max-w-xl mx-auto confirm-card shadow-2xl">
        <div class="bg-[#002349] p-8 text-center relative overflow-hidden">
            <div class="text-4xl mb-2">ğŸ‹</div>
            <h2 class="text-[#D4AF37] text-2xl font-black tracking-widest">ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² Ø§Ù„Ø­ÙˆØª</h2>
            <p class="text-white/50 text-xs mt-1 uppercase font-bold">Review Your Order</p>
        </div>
        
        <div class="p-8 space-y-2">
            <div class="mb-6">
                <h3 class="text-[10px] font-black text-slate-400 mb-3 border-b pb-1">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
                <div class="data-row"><span class="data-label">ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:</span> <span id="rName" class="data-value"></span></div>
                <div class="data-row"><span class="data-label">ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ:</span> <span id="rPhone" class="data-value" dir="ltr"></span></div>
                <div id="idSection" class="hidden">
                    <div class="data-row"><span class="data-label">ğŸªª Ø§Ù„Ù‡ÙˆÙŠØ©/Ø§Ù„Ø¬ÙˆØ§Ø²:</span> <span id="rIdNo" class="data-value"></span></div>
                    <div class="data-row"><span class="data-label">ğŸªª Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©:</span> <span id="rLicense" class="data-value"></span></div>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-[10px] font-black text-slate-400 mb-3 border-b pb-1">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©</h3>
                <div class="data-row"><span class="data-label">ğŸš— Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨:</span> <span id="rCar" class="data-value text-blue-600"></span></div>
                <div class="data-row"><span class="data-label">ğŸ“… Ø§Ù„Ù…ÙˆØ¹Ø¯:</span> <span id="rDateTime" class="data-value text-sm"></span></div>
                
                <div id="addonBox" class="bg-yellow-50 p-4 rounded-2xl hidden mt-3 border border-yellow-100">
                    <p class="text-[10px] font-black text-yellow-600 mb-1">Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©:</p>
                    <p id="rAddons" class="text-sm font-black text-yellow-900"></p>
                    <p id="rColors" class="text-[10px] text-yellow-700 mt-1 italic"></p>
                </div>
            </div>

            <div class="bg-slate-50 p-5 rounded-3xl border border-slate-100">
                <p class="text-[10px] font-black text-slate-400 mb-2">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯:</p>
                <p id="rLocDesc" class="text-xs font-bold text-slate-600 leading-relaxed"></p>
            </div>

            <div class="bg-slate-900 p-6 rounded-[2.5rem] text-center mt-8 relative">
                <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº (ØªÙ‚Ø¯ÙŠØ±ÙŠ)</p>
                <p id="rTotalPrice" class="text-4xl font-black text-[#D4AF37]"></p>
            </div>

            <button onclick="sendToWhatsApp()" class="w-full bg-[#25D366] text-white py-5 rounded-[2rem] font-black text-xl shadow-xl hover:bg-[#1eb956] transition-all mt-6 flex items-center justify-center gap-3">
                ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ <i class="fab fa-whatsapp text-2xl"></i>
            </button>
            
            <button onclick="window.location.href='index.html'" class="w-full text-slate-400 font-bold py-2 text-sm">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>
    </div>

    <script>
        const u = new URLSearchParams(window.location.search);
        
        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹
        document.getElementById('rName').innerText = u.get('name') || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        document.getElementById('rPhone').innerText = u.get('phone') || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        document.getElementById('rCar').innerText = u.get('car') || u.get('vehicle') || 'Ø®Ø¯Ù…Ø© Ø§Ù„Ø­ÙˆØª';
        document.getElementById('rDateTime').innerText = `${u.get('date')} | ${u.get('time')}`;
        
        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø³Ø¹Ø±
        const rawPrice = u.get('total_price') || u.get('price') || '0';
        document.getElementById('rTotalPrice').innerText = parseInt(rawPrice).toLocaleString() + " Ø¯.Ø¹";

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø³ØªÙ…Ø³ÙƒØ§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© (Ù„Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© ÙÙ‚Ø·)
        if(u.get('id_no')) {
            document.getElementById('idSection').classList.remove('hidden');
            document.getElementById('rIdNo').innerText = u.get('id_no');
            document.getElementById('rLicense').innerText = u.get('license');
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª (Ø£Ø¹Ø±Ø§Ø³ Ø£Ùˆ Ø´Ø®ØµÙŠ)
        if(u.get('addons') || u.get('colors')) {
            document.getElementById('addonBox').classList.remove('hidden');
            document.getElementById('rAddons').innerText = u.get('addons') || 'Ø¥Ø¶Ø§ÙØ§Øª Ù‚ÙŠØ§Ø³ÙŠØ©';
            document.getElementById('rColors').innerText = u.get('colors') || '';
        }

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        let locationText = "ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ø¨Ø± Ø§Ù„Ø®Ø±ÙŠØ·Ø© ğŸ›°ï¸";
        if(u.get('sDesc')) locationText = `Ù…Ù†: ${u.get('sDesc')} \nØ¥Ù„Ù‰: ${u.get('eDesc') || 'Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©'}`;
        document.getElementById('rLocDesc').innerText = locationText;

        function sendToWhatsApp() {
            const phone = "9647713225471";
            
            // ØªØ¬Ù‡ÙŠØ² Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø±Ø§Ø¦Ø·
            let mapLink = "";
            if(u.get('slat')) {
                mapLink = `ğŸ“ Ø§Ù†Ø·Ù„Ø§Ù‚: https://www.google.com/maps?q=${u.get('slat')},${u.get('slng')}\nğŸ ØªØ³Ù„ÙŠÙ…: https://www.google.com/maps?q=${u.get('elat')},${u.get('elng')}`;
            } else {
                mapLink = `ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: https://www.google.com/maps?q=${u.get('lat')},${u.get('lng')}`;
            }

            const message = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ - Ø´Ø±ÙƒØ© Ø§Ù„Ø­ÙˆØª ğŸ‹*
--------------------------
ğŸ‘¤ *Ø§Ù„Ø²Ø¨ÙˆÙ†:* ${u.get('name')}
ğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${u.get('phone')}
ğŸš— *Ø§Ù„Ø®Ø¯Ù…Ø©:* ${u.get('car') || u.get('vehicle')}
ğŸ“… *Ø§Ù„Ù…ÙˆØ¹Ø¯:* ${u.get('date')} | ${u.get('time')}
--------------------------
${u.get('id_no') ? 'ğŸªª *Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©:* ' + u.get('id_no') + '\n' : ''}${u.get('license') ? 'ğŸªª *Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©:* ' + u.get('license') + '\n' : ''}${u.get('addons') ? 'âœ¨ *Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª:* ' + u.get('addons') + '\n' : ''}${u.get('colors') ? 'ğŸ¨ *Ø§Ù„ØªÙØ§ØµÙŠÙ„:* ' + u.get('colors') + '\n' : ''}${u.get('sDesc') ? 'ğŸ“ *ÙˆØµÙ Ø§Ù„Ù…Ø³Ø§Ø±:* ' + u.get('sDesc') + ' -> ' + u.get('eDesc') + '\n' : ''}
ğŸ’° *Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:* ${document.getElementById('rTotalPrice').innerText}
--------------------------
${mapLink}

*ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ø­ÙˆØª Ø§Ù„Ø°ÙƒÙŠ ğŸŒŠ*`;

            window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`);
        }
    </script>
</body>
</html>
